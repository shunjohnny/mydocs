---
title: 3.2 ルーティングとページ移動
tags:
  - Next.js
---

## 複数ページとルーティング

|ルーティング|
|---|
|複数のページを作成し、それらに決まったURLを割り当てアクセスできるようにする仕組み|

|ルーティングの種類|説明|
|---|---|
|ファイルシステムベースルーティング|pagesフォルダ内にファイルを配置するだけで、<br>自動的にURLパスが作成される|
|ダイナミックルーティング|ファイル名に[]を使用し、動的なパスを設定|

### ファイルシステムベースルーティング

特に設定はいらず、フォルダーを作成して、page.tsxを中に用意するだけ

<br>

## otherページを作成する

app内にotherディレクトリを作成し、page.tsxを作成する

### スタイルクラスを追加する

global.cssにリンクの要素に適用されるクラスを作成する
:any-linkはあらゆるlinkに適用するスタイルを定義する
ここではlinkが青い文字になるように定義している

```css title="src/app/global.css"
:any-link {
  @apply text-lg m-5 text-sky-600;
}
```

### page.tsxを記述する

src/app/page.tsxからsrc/app/other/page.tsxにリンクで飛ぶ  
プログラムを作成する

```typescript title="src/app/page.tsx"
import Link from 'next/link'
export default function Home() {
    return (
        <main>
            <h1 className="title">Top page</h1>
            <p className="msg">This is other page sample.</p>
            <div>
                <Link href="/other">go other page</Link>
            </div>
        </main>
    )
}
```

```typescript title="src/app/other/page.tsx"
import Link from 'next/link'
export default function Other() {
    return(
        <main>
            <h1 className="title">Other page</h1>
            <p className="msg">これは、別のページです。</p>
            <div>
                <Link href="/">go back!!</Link>
            </div>
        </main>
    )
}
```

|src/app/page.tsx|src/app/other/page.tsx|
|---|---|
|![alt text](<../../../images/3.2 ルーティングとページ移動/3.2 ルーティングとページ移動_J0133291.png>)|![alt text](<../../../images/3.2 ルーティングとページ移動/3.2 ルーティングとページ移動_J0133291-1.png>)|

### リンクとLinkコンポーネント

下記のようにimportすることで使用できる

```typescript title="Linkコンポーネントの使用方法"
import Link from "next/link"
```

!!! tips "tips　どうして`<a>`を使用しないのか"
    `<Link>`を使用するとページ遷移をしないで表示だけ次のページに切り替わることができるため

<br>

## 「public」フォルダーの利用

|静的コンテンツ|
|---|
|イメージファル等、ページから読み込まれて使用されるファイル類  |

静的コンテンツは「public」フォルダーに配置される  
静的コンテンツを表示するページを作成する  

その前に挿入する画像を装飾するためのcssを追記しておく

```css title="src/app/global.css 画像の装飾"
img {
  @apply border-solid border-2 border-green-300 m-5 p-2;
}
```

publicフォルダ内に任意の画像(sample.jpg)を置いて、  
page.tsxを書き換える

```typescript title="src/app/other/page.tsx public内の画像を表示"
import Link from 'next/link'
import Image from 'next/image'

export default function Other() {
    return(
        <main>
            <h1 className="title">Other page</h1>
            <p className="msg">これは、別のページです。</p>
            <div>
                <Image src="/sample.jpg" alt="sample jpg" width={400} height={200}/>
            </div>
            <div>
                <Link href="/">go back!!</Link>
            </div>
        </main>
    )
}
```
<figure markdown="span">
  ![alt text](<../../../images/3.2 ルーティングとページ移動/3.2 ルーティングとページ移動_J0133291-2.png>){width=400}
  <figconfig>実行結果</figconfig>
</figure>

<br>

## ダイナミックルーティング

フォルダー名を[id]のように設定することで、  
動的なパス（例: /data/1）をパラメーターとして処理できる仕組み

### フォルダーを作成する

下記の様な感じでsrc/appの中に  
name/[name]/page.tsxを作成する

<figure markdown="span">
  ![alt text](<../../../images/3.2 ルーティングとページ移動/3.2 ルーティングとページ移動_J0133291-3.png>){width=400}
  <figconfig>フォルダ構成</figconfig>
</figure>

### ページの処理を作成する

```typescript title="src/app/name/[name]/page.tsx "
export default function Name({params}:{params:{name: string}}) {
    return (
        <main>
            <h1 className="title">Other page</h1>
            <p className="msg">あなたは、「{params.name}」ですね。</p>
            <div>
                <a href="/">go back!!</a>
            </div>
        </main>
    )
}
```

下記のようにlocalhost:3000/name/任意の名前にアクセスしたら、  
任意の名前が表示され、アクセスしたパスの値が渡され利用されていることが分かる

<figure markdown="span">
  ![alt text](<../../../images/3.2 ルーティングとページ移動/3.2 ルーティングとページ移動_J0133291-4.png>){width=400}
  <figconfig>実行結果</figconfig>
</figure>

```typescript title="解説"
export default function Name({params}:{params:{name: string}})
```

{params}:  
分割代入で、引数からparamsプロパティだけ取り出し

{params:{name: string}}:  
paramsがどんな形をしているか指定  
この場合、paramsはオブジェクトで、  
nameというプロパティがあり、その型はstringということを指定  

### 引数をシンプルにしたい
{}を取って下記のように書くこともできるが、  
nameの値を取り出すには、params.params.nameと記述しなければいけない

```typescript title="引数をシンプルにするために{}の省略"
function Name(params:{params:{name:string}})
```
### 複数のパレメータを渡したい
/name/[name]/[pass]/page.tsxみたいにすると、  
/name/taro/1234のようなURLに対応できる、その場合下記の様になる

``` typescript title="/src/app/name/[name]/[pass]/page.tsx 複数パラメータの使用方法"
export default function Name({params}:{params:{name: string, pass:string}})
```

## パラメータを指定しない場合

`http://localhost:3000/name`の後ろに無記載でアクセスすると404エラーが発生するので、  
/src/app/name/pate.tsxを作成して、何かメッセージをつけると親切