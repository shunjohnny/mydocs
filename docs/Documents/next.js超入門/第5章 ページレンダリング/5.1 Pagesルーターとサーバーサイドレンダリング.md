---
title: 5.1 Pagesルーターとサーバーサイドレンダリング
tags:
  - Next.js
---

## サーバーとクライアント
---
- **Appルーターの場合**  
  コンポーネント単位で、サーバー側とクライアント側のどちらかで実行されるかが決まる。


  | コンポーネント | 説明 |
  |---------------|------|
  | サーバーコンポーネント | クライアントで動的に更新されないもの |
  | クライアントコンポーネント | クライアントで動的に更新されるもの|

<br>

- **Pagesルーターの場合**  
  ページがどこでどのタイミングでレンダリングされるかが決まる。

  | レンダリングタイプ | 説明 |
  |--------------------|------|
  | クライアントサイドレンダリング | クライアントで動的に更新されるものは、<br>クライアント側に送られてからレンダリング |
  | スタティックレンダリング | 静的なコンテンツは、<br>ビルド時に事前にレンダリング |
  | ダイナミックレンダリング | 動的なコンテンツは、<br>クライアントからアクセスがあった際にサーバー側で都度レンダリング |

<br>

## Pagesルーターにおけるレンダリング
---

レンダリング：コンポーネントを実行してHTMLのコードとして出力する作業  
Next.jsのコンポーネントは、TypeScriptの解説として定義される

<br>

## レンダリングされる場所の違い
---

<figure markdown="span">
  ![Image title](<../../../../images/5.1 Pagesルーターとサーバーサイドレンダリング/5.1 Pagesルーターとサーバーサイドレンダリング_J0133291.png>){ width="500" }
  <figcaption>レンダリングされる場所の違いの模式図</figcaption>
</figure>

|レンダリングタイプ|説明|
|---|---|
|サーバーサイドレンダリング|コンポーネントがクライアント側で動的に変化するかどうかチェックし、<br>変化しない場合はサーバー側でレンダリングする。<br>あらかじめサーバー側でHTMLコードが生成されてから送られるため、<br>クライントに負担がない|
|クライアントサイドレンダリング|サーバーサイドと対になるもの|

## レンダリングされるタイミングの違い
---

<figure markdown="span">
  ![Image title](<../../../images/5.1 Pagesルーターとサーバーサイドレンダリング/5.1 Pagesルーターとサーバーサイドレンダリング_J0133291-1.png>){ width="500" }
  <figcaption>レンダリングされるタイミングの違いの模式図</figcaption>
</figure>


|レンダリングタイプ|説明|
|---|---|
|スタティックレンダリング|表示が変化せず完全に静かなものに使用|
|ダイナミックレンダリング|表示が動的なものに使用<br>クライントがアクセスした際にサーバーでレンダリングされ、<br>HTMLのコードに変換された形でクライアントに送られる|


## ビルドと製品アプリの実行
---

|コード|説明|
|---|---|
|npm run dev|開発モードで動かしている状態|
|npm start<br>npm start| プロジェクトをビルドして<br>生成されたアプリを実行する |

## クライアントサイドレンダリングについて
---

全てのページ表示をクライント側で生成する方式。  
Next.jsではサーバー側でレンダリング可能なものは自動的にサーバーサイドでレンダリングされる。

クライアント側でレンダリングして欲しい場合は
'use client'を使用する。

クライアントサイド＝普通のReactの機能だけでUIを構築しているページ