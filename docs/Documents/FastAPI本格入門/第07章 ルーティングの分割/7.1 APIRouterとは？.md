---
title: 7.1 APIRouterとは？
tags:
  - FastAPI
---

## APIRouterの概要

|APIRouter|
|---|
|FastAPIのアプリケーションのルーティングを機能ごとに分割し、モジュール化するためのクラス<br>「include_router()メソッド」を使用して、FastAPIアプリケーションに組み込む事ができる|

<figure markdown="span">
  ![alt text](<../../../images/7.1 APIRouterとは？/7.1 APIRouterとは？_J0133291.png>){width=400}
  <figconfig>APIRouterのマインドマップ</figconfig>
</figure>

<br>

## プログラムの作成

FastAPIを使用してHTTPリクエストに対応したAPIを定義する基本的なプログラムを作成する

```python title="main.py　FastAPIクラスのインスタンスを使用した方法でルーティング処理を行うプログラム"
from fastapi import FastAPI
from pydantic import BaseModel

app = FastAPI()


# ======スキーマ======
class Category(BaseModel):
    category_id: int
    category_name: str
    
class Item(BaseModel):
    item_id: int
    item_name: str
    category_id: int


# ======カテゴリ======
@app.get("/categories/", response_model=dict)
async def read_categories():
    return{"message": "カテゴリ一覧を表示", "categories": []}

@app.post("/categories/", response_model=dict)
async def create_category(category: Category):
    return {"message": "カテゴリを作成しました", "category": category}

@app.put("/categories/{category_id}", response_model=dict)
async def update_category(category_id: int, category: Category):
    return {"message": "カテゴリを更新しました",
            "category_id": category_id, "category": category}

@app.delete("/categories/{category_id}", response_model=dict)
async def delete_category(category_id: int):
    return {"message": "カテゴリを削除しました", "category_id": category_id}


# ======商品======
@app.get("/item/", response_model=dict)
async def read_items() :
    return {"message": "商品一覧を表示", "items": []}

@app.put("/items/", response_model=dict)
async def create_items(item: Item) :
    return {"message": "商品を作成しました", "item": item}

@app.post("/item/{item_id}", response_model=dict)
async def update_items(item_id: int, item: Item) :
    return {"message": "商品を更新しました", 
            "item_id": item_id, "item": item}

@app.delete("/item/{item_id}", response_model=dict)
async def delete_items(item_id: int) :
    return {"message": "商品を削除しました", "item_id": item_id}
```

<figure markdown="span">
  ![alt text](<../../../images/7.1 APIRouterとは？/7.1 APIRouterとは？_J0133291-1.png>){width=400}
  <figconfig>実行結果</figconfig>
</figure>